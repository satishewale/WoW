/*! Invoice Template Generator @author: Invoicebus @email: info@invoicebus.com @web: https://invoicebus.com @version: 1.0.0 @updated: 2015-03-27 15:03:35 @license: MIT */
!function(){document.getElementsByTagName("html")[0].style.position="absolute",document.getElementsByTagName("html")[0].style.top="-100000px",document.body.style.position="absolute",document.body.style.top="-100000px";var a,b,c,d="http://cdn.invoicebus.com/generator/",e="?utm_source=generator&utm_medium=template&utm_campaign=invoicebus_templates",f="https://invoicebus.com/saveinvoice/",g=".min",h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i=d+"jquery.min.js",j=d+"bootstrap.min.js",k=function(){var a=document.createElement("div");return a.innerHTML="Oops sorry, the template cannot be rendered. Mind checking your internet connection?",a.setAttribute("style",'position:fixed; top:0px; left:0px; background:#f75520; color:white; text-align:center; width:100%; padding:10px 0; font:normal 14px/1.4em "Open Sans", Arial, Sans-serif; border-bottom:3px solid #fff; box-shadow:0px 0px 10px 2px #aaa;'),document.body.appendChild(a),!1},l=100,m=0,n=5e3,o=function(a){var b=document.createElement("script");b.async=!0,b.type="text/javascript",b.src=a,document.body.appendChild(b)},p=function(a){return m>n?k():(window.jQuery?(o(j),q(a)):setTimeout(function(){p(a)},l),void(m+=l))},q=function(a){return m>n?k():(jQuery.fn.tooltip?a(jQuery):setTimeout(function(){q(a)},l),void(m+=l))},r=function(){$(function(){v(),ib_loadBootstrapDatepicker(),ib_loadBootstrapTypeahead(),ob(),D(),gb(),F(),ib(),pb(),R(),P(),Q(),A(),x(),s()})},s=function(){var a=setInterval(function(){for(var b=0;b<document.styleSheets.length;b++)if(-1!=document.styleSheets[b].href.indexOf("generator"+g+".css")){$("html").removeAttr("style"),$("body").removeAttr("style"),clearInterval(a),window.status="finished";break}},10)},t=["a","b","body","br","div","em","footer","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","img","label","li","link","meta","ol","p","pre","section","span","strong","style","sub","sup","table","tbody","td","tfoot","th","thead","title","tr","ul"],u=["cellpadding","cellspacing","charset","class","colspan","content","data-hide-on-quote","data-iterate","data-logo","dir","height","href","http-equiv","id","lang","name","rel","rowspan","src","style","title","type","width"],v=function(){$(document).find(":not("+t.join(",")+")").remove(),$("*").each(function(){for(var a=0;a<this.attributes.length;a++)-1==u.indexOf(this.attributes[a].name)&&this.removeAttribute(this.attributes[a].name)}),$(document).find("a").each(function(){0===$(this).attr("href").indexOf("javascript")&&$(this).removeAttr("href")})},w=function(){var a=navigator.userAgent;return a.indexOf("MSIE ")>-1||a.indexOf("Trident/")>-1},x=function(){setTimeout(function(){$(document).tooltip({selector:'[data-tooltip="tooltip"]',html:!0,container:"body"})},200)},y=!1,z=function(){var a=$('[contenteditable="true"], [data-ibcl-id="issue_date"], [data-ibcl-id="due_date"]');y?(a.addClass("ib_editable_outline ib_stop_animate"),$(".ib_highlight_editable").css("font-weight","bold")):(a.removeClass("ib_editable_outline"),$(".ib_highlight_editable").css("font-weight","normal"))},A=function(){$("head").prepend('<link rel="stylesheet" href="'+d+"generator"+g+'.css" media="all" />'),$(document.body).before($('<ib-span class="ib_invoice_commands_wrap"><ib-span class="ib_invoice_commands"><ib-span id="ib-print-btn" class="ib_default_button"><i class="fa fa-print"></i> Print</ib-span><ib-span class="ib_default_button ib_success_button"><i class="fa fa-save"></i> Save</ib-span><ib-span class="ib_save_info" data-tooltip="tooltip" data-placement="right" title="You\'ll need Invoicebus account to save this invoice"><i class="fa fa-question-circle"></i></ib-span><ib-span class="ib_gray_link ib_how_to_link ib_pull_right" data-toggle="modal" data-target="#ib_howToModal"></ib-span><ib-span class="ib_top_separator ib_pull_right">●</ib-span><ib-span class="ib_gray_link ib_highlight_editable ib_pull_right"></ib-span></ib-span></ib-span>')).after($("<ib-span class=\"ib_invoicebus_love\">Crafted with &#x2764; by<br><ib-span ></ib-span></ib-span>")),$("#ib-print-btn").click(function(){y=!1,z(),window.print()}),$(".ib_highlight_editable").click(function(){y=!y,z()}),$(document).scroll(function(){0===document.body.scrollTop&&0===document.documentElement.scrollTop?$(".ib_invoice_commands_wrap").removeClass("ib_commands_shadow"):$(".ib_invoice_commands_wrap").hasClass("ib_commands_shadow")||$(".ib_invoice_commands_wrap").addClass("ib_commands_shadow")}),$(document.body).after($("<ib-span class=\"ib_invoicebus_fineprint\"> <ib-span></ib-span></ib-span>")),a.invoicebus_fineprint||$(".ib_invoicebus_fineprint").css("visibility","hidden"),$(".ib_success_button").click(sb),$('[data-iterate="item"]:last').after($('<ib-span class="ib_bottom_row_commands"><ib-span class="ib_blue_link ib_add_new_row_link">Add new row</ib-span><ib-span class="ib_blue_link ib_show_hide_columns_link">Configure Columns</ib-span></ib-span>')),$(".ib_add_new_row_link").click(function(a){eb(this,a)}),$(".ib_show_hide_columns_link").after($('<ib-span class="ib_show_hide_columns"><ib-span><input type="checkbox" value="item_row_number" /><ib-span>Row number</ib-span></ib-span><ib-span><input type="checkbox" value="item_description" /><ib-span>Description</ib-span></ib-span><ib-span><input type="checkbox" value="item_quantity" /><ib-span>Quantity</ib-span></ib-span><ib-span><input type="checkbox" value="item_price" /><ib-span>Price</ib-span></ib-span><ib-span><input type="checkbox" value="item_discount" /><ib-span>Discount</ib-span></ib-span><ib-span><input type="checkbox" value="item_tax" /><ib-span>Tax</ib-span></ib-span><ib-span><input type="checkbox" value="item_line_total" /><ib-span>Line total</ib-span></ib-span></ib-span>')),$(".ib_show_hide_columns_link, .ib_show_hide_columns").hover(function(){$(".ib_show_hide_columns").css("display","block")},function(){$(".ib_show_hide_columns").hide()}),$(".ib_show_hide_columns > ib-span > ib-span").click(function(){var a=$(this).parent().find("input:checkbox");a.prop("checked",!a.is(":checked")),a.change()}),$(".ib_show_hide_columns > ib-span > input:checkbox").change(function(){var a=$(this).val();"item_row_number"==a?$('[data-ibcl-id="'+a+'_label"], [data-ibcl-id="'+a+'"]').toggleClass("ib_hide_column",!$(this).is(":checked")):($('[data-ibcl-id="'+a+'_label"], [data-ibcl-id="'+a+'"]').toggle($(this).is(":checked")),$('[data-ibcl-id="'+a+'_label"]').hasClass("ibcl_ie_contenteditable")&&$('[data-ibcl-id="'+a+'_label"]').parent().toggle($(this).is(":checked")),$('[data-ibcl-id="'+a+'"]').hasClass("ibcl_ie_contenteditable")&&$('[data-ibcl-id="'+a+'"]').parent().toggle($(this).is(":checked")),Z())});for(var b=0;b<a.default_columns.length;b++)$('input[type="checkbox"][value="'+a.default_columns[b]+'"]').prop("checked",!0);$(".ib_show_hide_columns > ib-span > input:checkbox").change();var c='<ib-div id="ib_howToModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="howToModal" aria-hidden="true"><ib-div class="modal-dialog"><ib-div class="modal-content"><ib-div class="modal-header"><ib-span type="button" class="close" data-dismiss="modal"><ib-span aria-hidden="true">&times;</ib-span></ib-span><ib-div class="modal-title" id="howToModal">How to use this template?</ib-div></ib-div><ib-div class="modal-body"><ib-div class="ib_how_to_container"><ib-div class="ib_how_to">   <ib-div class="ib_p">     If you\'re one-man performer and everything you do for your business you do it by yourself – welcome to the club! You\'re well familiar with the pain of writing invoices. Word? Excel? Complicated accounting software? Forget about it!   </ib-div>    <ib-div class="ib_p">     We specifically created this simple template to address the most boring and time consuming invoicing task – the torture of crafting invoices with all those messy calculations, itemized lists, breakdown of taxes, net terms, etc. We also put special care in its design, so your invoice will always stand out among 100s of others in the pile.   </ib-div>    <ib-div class="ib_h3">What can I do with this template?</ib-div>   <ib-div class="ib_p">     <ib-div class="ib_ul">       <ib-div class="ib_li">         &#9679; &nbsp; Write professional looking invoices in a matter of seconds.         <ib-div class="ib_ul">           <ib-div class="ib_li">             &#9675; &nbsp; Use any language or currency.           </ib-div>           <ib-div class="ib_li">             &#9675; &nbsp; Add your own logo with simple drag and drop.           </ib-div>           <ib-div class="ib_li">             &#9675; &nbsp; Easily add, remove, and reorder item rows.           </ib-div>           <ib-div class="ib_li">             &#9675; &nbsp; Add taxes and discounts.           </ib-div>           <ib-div class="ib_li">             &#9675; &nbsp; Configure item column visibility.           </ib-div>           <ib-div class="ib_li">             &#9675; &nbsp; Auto calculate subtotals and totals as you type.           </ib-div>           <ib-div class="ib_li">             &#9675; &nbsp; Save your default company data for future re-use.           </ib-div>         </ib-div>       </ib-div>       <ib-div class="ib_li">         &#9679; &nbsp; Restyle it by using simple HTML &amp; CSS.       </ib-div>       <ib-div class="ib_li">         &#9679; &nbsp; Directly print it out.       </ib-div>     </ib-div>   </ib-div>    <ib-div class="ib_h3">How can I save my default company data for future re-use?</ib-div>   <ib-div class="ib_p">     This data is stored in the <ib-span class="ib_code">data.js</ib-span> file so you can easily edit it with any text editor.   </ib-div>    <ib-div class="ib_p">     To save your logo, you\'ll need to supply base64 encoded data URI of it (simply put – text representation of the image). No matter how scary this might sound, the only thing you need to do is drag and drop your logo to this template and then click on it. A popup window will show up with generated base64 data URI (long string of characters) of the logo. You need to copy and paste this string in the <ib-span class="ib_code">data.js</ib-span> file (into the value of the <ib-span class="ib_code">{company_logo}</ib-span> property). That\'s all.   </ib-div>    <ib-div class="ib_p">     The data and the structure of the data.js file is quite simple and self-explanatory. Any questions whatsoever, tell us at our <ib-span class="ib_a" onclick="window.open(\'https://groups.google.com/d/forum/html-invoice-generator\', \'_blank\')">support forum</ib-span>.   </ib-div>    <ib-div class="ib_h3">How to save the invoice?</ib-div>   <ib-div class="ib_p">     This one is a bit tricky. Due to the limitation of how browsers work with local HTML files, we haven\'t figured out yet how to store any dynamic data you enter, such as items, prices, taxes, etc. However, you have few other alternatives   </ib-div>    <ib-div class="ib_ul">     <ib-div class="ib_li">       - &nbsp; Use the embedded PDF printer in Google Chrome.     </ib-div>     <ib-div class="ib_li">       - &nbsp; Use free PDF print driver such as <ib-span class="ib_a" onclick="window.open(\'http://www.foxitsoftware.com\', \'_blank\')">Foxit Reader PDF Printer</ib-span> or <ib-span class="ib_a" onclick="window.open(\'http://www.bullzip.com\', \'_blank\')">BullZip</ib-span>.     </ib-div>     <ib-div class="ib_li">       - &nbsp; Use the green "Save" button that will take you to our online invoicing service <ib-span class="ib_a" onclick="window.open(\'https://invoicebus.com\', \'_blank\')">Invoicebus</ib-span> (which happens to be a great tool to automate your invoicing by the way) and securely store it into your personal account.     </ib-div>   </ib-div>    <ib-div class="ib_p">     While the first two options will generate static PDF version of the invoice (which cannot be modified), the third option will generate live online invoice (<ib-span class="ib_a" onclick="window.open(\'https://invoicebus.com/demoinvoice\', \'_blank\')">like this</ib-span>) which can be edited on-the-fly, sent by email, tracked, and paid instantly by credit card or PayPal. You will also be able to save and reuse every item, client, and tax in the future.   </ib-div>    <ib-div class="ib_h3">How to restyle the template?</ib-div>   <ib-div class="ib_p">     As the template is completely separate from its logic, you can easily restyle it by using simple HTML and CSS techniques. However, there are few rules which are considered to be good practice when making structural changes (deleting or rearranging elements) of the DOM, so have in mind to follow <ib-span class="ib_a" onclick="window.open(\'https://invoicebus.com/how-to-create-invoice-template/\', \'_blank\')">this guide</ib-span>.   </ib-div>    <ib-div class="ib_h3">Do I have to be connected to internet to use it?</ib-div>   <ib-div class="ib_p">     Yes, but isn\'t necessary. In the background the template links to remote JavaScript file (<ib-span class="ib_code">generator.min.js</ib-span>) located on our server from which it pulls all the logic. If for some reason you don\'t have internet access on your computer, you can <ib-span class="ib_a" onclick="window.open(\'http://cdn.invoicebus.com/generator/generator.zip\', \'_blank\')">download</ib-span> the script locally, and modify the <ib-span class="ib_code">template.html</ib-span> file to point to the local version of the script.   </ib-div>    <ib-div class="ib_p">     We generally encourage you to use the remote script because any recent updates immediately reflect into the template you\'re using.   </ib-div>    <ib-div class="ib_h3">What about the fonts used?</ib-div>   <ib-div class="ib_p">     The template uses Google Fonts as they are free and open to everyone. If you want to use the template offline (without being connected to internet) you\'ll have to download and install the fonts on your local computer (<ib-span class="ib_a" onclick="window.open(\'http://www.fonts.com/web-fonts/google\', \'_blank\')">SkyFonts</ib-span> is a simple tool that helps you do this easily).   </ib-div>     <ib-div class="ib_h3">Can I use the JavaScript source code?</ib-div>   <ib-div class="ib_p">     Absolutely! In fact, we would be proud if you decide to use it (<ib-span class="ib_a" onclick="window.open(\'https://github.com/Invoicebus/html-invoice-generator\', \'_blank\')">fork us on GitHub</ib-span>). Whether you choose to use it in commercial or non-commercial project, feel free to give us a shout as we are eager to hear all possibilities how this tool can be used. Sometimes, we may even give you a hand ;)   </ib-div>    <ib-div class="ib_h3">Support our work</ib-div>   <ib-div class="ib_p">     Maintaining this script takes a lot of time and effort to keep it bug free and up to date. All we\'re asking is a little favor – discrete fine print of our invoicing service at the bottom of the printed document. It would mean the world to us if you put it there. Thanks!   </ib-div>    <ib-div class="ib_p">     It\'s fine even if you decide to avoid giving us credit, so we made this choice easier to you. In the <ib-span class="ib_code">data.js</ib-span> file we included property called <ib-span class="ib_code">invoicebus_fineprint</ib-span> which can be set to <ib-span class="ib_code">true</ib-span> (to show the fine print) or <ib-span class="ib_code">false</ib-span> (to hide the fine print).   </ib-div>    <ib-div class="ib_h3">Found a bug?</ib-div>   <ib-div class="ib_p">     If you encounter any issue or found a bug, please report it at our <ib-span class="ib_a" onclick="window.open(\'https://github.com/Invoicebus/html-invoice-generator/issues\', \'_blank\')">GitHub repo</ib-span>. Please do not submit general questions here instead use the support forum (see below). Thanks.   </ib-div>    <ib-div class="ib_h3">Suggestions, questions, criticism?</ib-div>   <ib-div class="ib_p">     Is there anything we can do to improve this template and make it better for you? Good things / bad things? Feel free to write us at our <ib-span class="ib_a" onclick="window.open(\'https://groups.google.com/d/forum/html-invoice-generator\', \'_blank\')">support forum</ib-span> – we read and respond to every post.   </ib-div> </ib-div> </ib-div></ib-div><ib-div class="modal-footer"><ib-span class="ib_default_button" data-dismiss="modal">OK, got it</ib-span></ib-div></ib-div></ib-div></ib-div>';$(document.body).after($(c))},B=function(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b].src;if(c.indexOf("generator"+g+".js?")>-1)return c.substring(c.indexOf("?")+1)}},C=0,D=function(){a={"{company_logo}":"","{company_name}":{default_text:"Dino Store",tooltip:"Enter your company name"},"{company_address}":{default_text:"227 Cobblestone Road",tooltip:"Enter company's address"},"{company_city_zip_state}":{default_text:"30000 Bedrock, Cobblestone County",tooltip:"Enter company's zip, city and country"},"{company_phone_fax}":{default_text:"+555 7 789-1234",tooltip:"Enter company's contact phones"},"{company_email_web}":{default_text:"http://dinostore.bed | hello@dinostore.bed",tooltip:"Enter company's web and email address"},"{payment_info1}":{default_text:"Payment details:",tooltip:"Enter your payment details"},"{payment_info2}":{default_text:"ACC:123006705",tooltip:"Enter other payment details"},"{payment_info3}":{default_text:"IBAN:US100000060345",tooltip:"Enter other payment details"},"{payment_info4}":{default_text:"SWIFT:BOA447",tooltip:"Enter other payment details"},"{payment_info5}":{default_text:"",tooltip:"Enter other payment details"},"{issue_date_label}":{default_text:"Issue Date:",tooltip:"Enter issue date label"},"{issue_date}":{default_text:"",tooltip:"Select invoice issue date"},"{net_term_label}":{default_text:"Net:",tooltip:"Enter net days label"},"{net_term}":{default_text:21,tooltip:"Enter invoice net days"},"{due_date_label}":{default_text:"Due Date:",tooltip:"Enter invoice due date label"},"{due_date}":{default_text:"",tooltip:"Select invoice due date"},"{currency_label}":{default_text:"Currency:",tooltip:"Enter invoice currency label"},"{currency}":{default_text:"USD",tooltip:"Enter invoice currency"},"{po_number_label}":{default_text:"P.O. #",tooltip:"Enter P.O. label"},"{po_number}":{default_text:"1/3-147",tooltip:"Enter P.O. Number"},"{bill_to_label}":{default_text:"Bill to:",tooltip:"Enter bill to label"},"{client_name}":{default_text:"Slate Rock and Gravel Company",tooltip:"Enter client name"},"{client_address}":{default_text:"222 Rocky Way",tooltip:"Enter client address"},"{client_city_zip_state}":{default_text:"30000 Bedrock, Cobblestone County",tooltip:"Enter client city, zip, country"},"{client_phone_fax}":{default_text:"+555 7 123-5555",tooltip:"Enter client pnone & fax"},"{client_email}":{default_text:"fred@slaterockgravel.bed",tooltip:"Enter client email"},"{client_other}":{default_text:"Attn: Fred Flintstone",tooltip:"Enter other client info"},"{invoice_title}":{default_text:"INVOICE",tooltip:"Enter invoice title"},"{invoice_number}":{default_text:"#1",tooltip:"Enter invoice number"},"{item_row_number_label}":{default_text:"",tooltip:""},"{item_description_label}":{default_text:"Item",tooltip:"Enter item header"},"{item_quantity_label}":{default_text:"Quantity",tooltip:"Enter quantity header"},"{item_price_label}":{default_text:"Price",tooltip:"Enter price header"},"{item_discount_label}":{default_text:"Discount",tooltip:"Enter discount header"},"{item_tax_label}":{default_text:"Tax",tooltip:"Enter tax header"},"{item_line_total_label}":{default_text:"Linetotal",tooltip:"Enter line total header"},"{item_row_number}":{default_text:"",tooltip:""},"{item_description}":{default_text:"",tooltip:"Enter item description"},"{item_quantity}":{default_text:"",tooltip:"Enter quantity"},"{item_price}":{default_text:"",tooltip:"Enter price"},"{item_discount}":{default_text:"",tooltip:"Enter discount"},"{item_tax}":{default_text:"",tooltip:"Enter tax"},"{item_line_total}":{default_text:"",tooltip:""},"{amount_subtotal_label}":{default_text:"Subtotal:",tooltip:"Enter subtotal label"},"{amount_subtotal}":{default_text:"",tooltip:""},"{tax_name}":{default_text:"Tax:",tooltip:"Enter tax label"},"{tax_value}":{default_text:"",tooltip:""},"{amount_total_label}":{default_text:"Total:",tooltip:"Enter total label"},"{amount_total}":{default_text:"",tooltip:""},"{amount_paid_label}":{default_text:"Paid:",tooltip:"Enter amount paid label"},"{amount_paid}":{default_text:"",tooltip:"Enter amount paid"},"{amount_due_label}":{default_text:"Amount Due:",tooltip:"Enter amount due label"},"{amount_due}":{default_text:"",tooltip:""},"{terms_label}":{default_text:"Terms & Notes",tooltip:"Enter terms and notes label"},"{terms}":{default_text:"Fred, thank you very much. We really appreciate your business.<br />Please send payments before the due date.",tooltip:"Enter invoice terms and notes"},date_format:"mm/dd/yyyy",currency_position:"left",default_columns:["item_row_number","item_description","item_quantity","item_price","item_discount","item_tax","item_line_total"],default_quantity:"1",default_price:"0",default_discount:"0",default_tax:"0",default_number_rows:3,auto_calculate_dates:!0,load_items:!0,invoicebus_fineprint:!0,items:[{item_description:"Frozen Brontosaurus Ribs",item_quantity:"2",item_price:"120",item_discount:"",item_tax:"2%"},{item_description:"Mammoth Chops",item_quantity:"14",item_price:"175",item_discount:"-10%",item_tax:"5%"},{item_description:"",item_quantity:"",item_price:"",item_discount:"",item_tax:""}]},E()},E=function(){if(!(C>n)){if("undefined"!=typeof ib_invoice_data){for(var b in ib_invoice_data)"undefined"!=typeof a[b].default_text?a[b].default_text=ib_invoice_data[b]:a[b]=ib_invoice_data[b];mb=ib_invoice_data.currency_position,lb=$(kb).map(function(b,c){return c.code==a["{currency}"].default_text?c.symbol:void 0})[0]}else setTimeout(function(){E()},l);C+=l}},F=function(){G()},G=function(){H("{company_name}"),H("{company_address}"),H("{company_city_zip_state}"),H("{company_phone_fax}"),H("{company_email_web}"),H("{payment_info1}"),H("{payment_info2}"),H("{payment_info3}"),H("{payment_info4}"),H("{issue_date_label}"),H("{issue_date}",!0,{"data-date":X}),H("{net_term_label}"),H("{net_term}"),H("{due_date_label}"),H("{due_date}",!0,{"data-date":Y}),H("{currency_label}"),H("{currency}"),H("{po_number_label}"),H("{po_number}"),H("{bill_to_label}"),H("{payment_info5}"),H("{client_name}"),H("{client_address}"),H("{client_city_zip_state}"),H("{client_phone_fax}"),H("{client_email}"),H("{client_other}"),H("{invoice_title}"),H("{invoice_number}"),H("{item_row_number_label}",!0),H("{item_description_label}"),H("{item_quantity_label}"),H("{item_price_label}"),H("{item_discount_label}"),H("{item_tax_label}"),H("{item_line_total_label}"),H("{item_row_number}",!0),H("{item_description}"),H("{item_quantity}"),H("{item_price}"),H("{item_discount}"),H("{item_tax}"),H("{item_line_total}",!0),H("{amount_subtotal_label}"),H("{amount_subtotal}",!0),H("{tax_name}"),H("{tax_value}",!0),H("{amount_total_label}"),H("{amount_total}",!0),H("{amount_paid_label}"),H("{amount_paid}"),H("{amount_due_label}"),H("{amount_due}",!0),H("{terms_label}"),H("{terms}")},H=function(b,c,d){for(var e=b.substring(1,b.length-1),f="TABLE,COL,COLGROUP,TBODY,TD,TFOOT,TH,THEAD,TR".split(","),g=$('*:contains("'+b+'")'),h=0;h<g.length;h++)if(0===$(g[h]).children().length&&3==$(g[h]).prop("firstChild").nodeType){var i=$(g[h]);if(w()&&f.indexOf(i.prop("tagName"))>-1&&!c){var j=$('<ib-span class="ibcl_ie_contenteditable" contenteditable="true"></ib-span>');i.html(j),i=j}i.attr("data-ibcl-id",e).addClass("ibcl_"+e).attr("data-tooltip","tooltip").attr("data-placement","top").attr("title",a[b].tooltip).html(a[b].default_text),d&&i.attr(d),c||i.attr("contenteditable","true")}},I=820,J=820,K=1,L=0,M=0,N=820,O=820,P=function(){$('[data-logo="{company_logo}"]').attr("data-logo","company_logo").attr("src",h)},Q=function(){var b=$('[data-logo="company_logo"]').attr("src",h);$(document).bind("drop dragover",function(a){a.stopPropagation(),a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="none"});var c='<ib-div id="ib_base64Modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="base64Modal" aria-hidden="true"><ib-div class="modal-dialog"><ib-div class="modal-content"><ib-div class="modal-header"><ib-span type="button" class="close" data-dismiss="modal"><ib-span aria-hidden="true">&times;</ib-span></ib-span><ib-div class="modal-title" id="howToModal">Base64 Data URI</ib-div></ib-div><ib-div class="modal-body"><textarea class="ib_logo_base64" readonly onclick="this.focus();this.select();" onfocus="this.select();"></textarea></ib-div><ib-div class="modal-footer"><ib-span class="ib_default_button" data-dismiss="modal">Close</ib-span></ib-div></ib-div></ib-div></ib-div>';$(document.body).after($(c)),$("#ib_base64Modal").on("show.bs.modal shown.bs.modal",function(){try{$(".ib_logo_base64").select()}catch(a){$(".ib_logo_base64").focus()}}),b.after($('<ib-div class="ib_remove_logo_overlay" data-tooltip="tooltip" data-placement="top" data-toggle="modal" data-target="#ib_base64Modal" title="Click to see the base64 data URI"><ib-span class="ib_remove_logo" title="Remove logo"><i class="fa fa-times-circle"></i></ib-span></ib-div>').hover(function(){},function(){$(".ib_remove_logo_overlay").hide()})),b.hover(function(){if(""!==b.attr("src")){var a=$('[data-logo="company_logo"]').offset();$(".ib_remove_logo_overlay").show().offset(a).width(L).height(M)}},function(){}),setTimeout(function(){L=$('[data-logo="company_logo"]').width(),M=$('[data-logo="company_logo"]').height(),K=L/M,L>M?J*=1/K:I*=K,b.hide().before($('<ib-span class="ib_drop_zone" data-tooltip="tooltip" data-placement="top" title="Drop image or click to upload your logo (max 2MB).<br>For better print resolution use larger image,<br>as it\'s automatically scaled down."><ib-span>Drop your logo here<br /><ib-span>('+L+" x "+M+'px)</ib-span><input type="file" accept="image/*" /></ib-span></ib-span>').width(L).height(M)),$(".ib_drop_zone").bind("dragenter",g).bind("dragleave",i).bind("dragover",f).bind("drop",d),$("input:file").change(function(a){a.originalEvent.dataTransfer={files:$(this).prop("files")},d(a)}),setTimeout(function(){a["{company_logo}"]&&/^data:image\/.+;base64/.test(a["{company_logo}"])&&(b.attr("src",a["{company_logo}"]).css("display","block").hide().show(),$(".ib_logo_base64").val($('[data-logo="company_logo"]').attr("src")),$(".ib_drop_zone").hide())},100)},100);var d=function(a){a.stopPropagation(),a.preventDefault();var c=a.originalEvent.dataTransfer.files,d=c[0];if(d){if(!d.type.match(/image.*/))return void alert("Please upload image file. Supported formats are .png, .jpg ang .gif");if(d.size>2097152)return void alert("File too big, maximum size is 2MB");var e=new Image,f=new FileReader;f.onload=function(a){e.src=a.target.result},e.onload=function(){var a=e.width,c=e.height;N=I,O=J,N>=a&&a>=c&&(O=1*a/K,N=a),O>=c&&c>=a&&(N=c*K,O=c),L>=a&&a>=c&&(O=1*L/K,N=L),M>=c&&c>=a&&(N=M*K,O=M),a>=N&&(c*=N/a,a=N),c>=O&&(a*=O/c,c=O),1>a&&(a=1),1>c&&(c=1);var d=document.createElement("canvas");d.width=N,d.height=O;var f=(N-a)/2,g=d.getContext("2d");g.drawImage(e,f,0,a,c);var h=d.toDataURL("image/png");b.attr("src",h).css("display","block").hide().fadeIn(),$(".ib_logo_base64").val($('[data-logo="company_logo"]').attr("src")),$(".ib_drop_zone").hide()},f.readAsDataURL(d),$(".ib_drop_zone").removeClass("ib_border_hover")}},e=function(a){a.preventDefault(),a.stopPropagation(),b.attr("src",h).hide(),$(".ib_drop_zone").show(),$(".ib_remove_logo_overlay").hide(),$("input:file").val("")},f=function(a){a.stopPropagation(),a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="copy"},g=function(a){a.stopPropagation(),a.preventDefault(),$(".ib_drop_zone").addClass("ib_border_hover")},i=function(a){a.stopPropagation(),a.preventDefault(),$(".ib_drop_zone").removeClass("ib_border_hover")};$(".ib_remove_logo").click(e)},R=function(){b=$('[data-iterate="item"]'),c=$('[data-iterate="tax"]').hide().clone();var d=1,e=a.default_number_rows;for("undefined"!=typeof ib_invoice_data&&"undefined"!=typeof ib_invoice_data.items&&(a.items=ib_invoice_data.items),e<a.items.length&&(e=a.items.length);e>d;)$(b).after($(b).clone()),d++;_(),b=b.clone(),cb(),bb(),Z()},S=function(a,b){for(var c=0;c<a.length;c++)if(Object.keys(a[c])[0]==b)return c;return-1},T=function(a,b){for(var c=0;c<a.length;c++)if(tax_row=$(a[c]).find('[data-ib-value="'+b+'"]'),tax_row.length)return c;return-1},U=function(a){return $('[data-iterate="tax"]:visible').find('[data-ib-value="'+a+'"]').closest('[data-iterate="tax"]').find('[data-ibcl-id="tax_name"]').text().replace(/:/gi,"")};String.prototype.getNumber=function(){return Math.abs(parseFloat(this.replace(/[^0-9.]/gi,"")))};var V,W,X,Y,Z=function(){for(var b,d,e,f=$('[data-iterate="item"]'),g=0,h=0,i=0,j=[],k=0;k<f.length;k++){var l=$(f[k]),m=l.find('[data-ibcl-id="item_quantity"]:visible').text().getNumber()||a.default_quantity.getNumber(),n=l.find('[data-ibcl-id="item_price"]:visible').text().getNumber()||a.default_price,o=l.find('[data-ibcl-id="item_discount"]:visible').text().getNumber()||a.default_discount.getNumber(),p=l.find('[data-ibcl-id="item_tax"]:visible').text().getNumber()||a.default_tax.getNumber(),q=l.find('[data-ibcl-id="item_line_total"]:visible');b=$('[data-ibcl-id="amount_paid"]').text().getNumber(),d=$('[data-ibcl-id="amount_due"]').text().getNumber();var r=0,s=0;if(isNaN(m)||isNaN(n)||(r=m*n),isNaN(o)||(r-=r*(o/100)),g+=r,isNaN(p)||(s=p/100),i=r*s,h+=i,0!==p){var t={};t[p]=i;var u=S(j,p);u>-1?j[u][p]+=i:j.push(t)}q.text(0!==r?r.toFixed(2):"")}var v,w,x=[];for(e=0;e<j.length;e++)w=Object.keys(j[e])[0],v=$('[data-iterate="tax"]:visible').find('[data-ib-value="'+w+'"]').closest('[data-iterate="tax"]'),v.length&&x.push($(v).clone());for($('[data-iterate="tax"]:visible').remove(),e=0;e<j.length;e++){w=Object.keys(j[e])[0];var y=T(x,w);if(y>-1)$('[data-iterate="tax"]:hidden').before(x[y]);else{v=c.clone().show();var A=v.find('[data-ibcl-id="tax_name"]'),B=A.text().trim(),C=B.lastIndexOf(":");(-1==C||C!=B.length-1)&&(C=B.length),A.text(B.substring(0,C)+" "+(e+1)+B.substring(C,B.length)),v.find('[data-ibcl-id="tax_value"]').attr("data-ib-value",Object.keys(j[e])[0]),$('[data-iterate="tax"]:hidden').before(v)}}for(e=0;e<j.length;e++)w=Object.keys(j[e])[0],v="left"==mb?lb+j[e][w].toFixed(2):j[e][w].toFixed(2)+lb,$('[data-iterate="tax"]').find('[data-ib-value="'+w+'"]').html(v);var D=g+h;isNaN(b)&&(b=0,$('[data-ibcl-id="amount_paid"]').text(b.toFixed(2))),isNaN(d)&&(d=0),d=D-b,g="left"==mb?lb+g.toFixed(2):g.toFixed(2)+lb,D="left"==mb?lb+D.toFixed(2):D.toFixed(2)+lb,d="left"==mb?lb+d.toFixed(2):d.toFixed(2)+lb,$('[data-ibcl-id="amount_subtotal"]').text(g),$('[data-ibcl-id="amount_total"]').text(D),$('[data-ibcl-id="amount_due"]').text(d),z()},_=function(){for(var a=$('[data-ibcl-id="item_row_number"]'),b=0;b<a.length;b++)$(a[b]).append($('<ib-span data-row-number="item_row_number"></ib-span>'));ab()},ab=function(){for(var a=$('[data-row-number="item_row_number"]'),b=0;b<a.length;b++)$(a[b]).html(b+1)},bb=function(){if(a.load_items){var b=$('[data-iterate="item"]');"undefined"!=typeof ib_invoice_data&&"undefined"!=typeof ib_invoice_data.items&&(a.items=ib_invoice_data.items);for(var c=0;c<a.items.length;c++)$(b[c]).find('[data-ibcl-id="item_description"]').text(a.items[c].item_description),$(b[c]).find('[data-ibcl-id="item_quantity"]').text(a.items[c].item_quantity),$(b[c]).find('[data-ibcl-id="item_price"]').text(a.items[c].item_price),$(b[c]).find('[data-ibcl-id="item_discount"]').text(a.items[c].item_discount),$(b[c]).find('[data-ibcl-id="item_tax"]').text(a.items[c].item_tax)}},cb=function(){var a='<ib-span class="ib_row_commands" style="height:'+$('[data-iterate="item"]').height()+'px;"><ib-span class="ib_commands"><ib-span class="ib_add" title="Insert row"><i class="fa fa-plus"></i></ib-span><ib-span class="ib_delete" title="Remove row"><i class="fa fa-minus"></i></ib-span><ib-span class="ib_move" title="Drag to reorder"><i class="fa fa-sort"></i></ib-span></ib-span></ib-span>';$(".ib_row_commands").remove();for(var b=$('[data-iterate="item"]'),c=0;c<b.length;c++)$(b[c]).children(":first").css("position","relative").prepend($(a));$(".ib_add").click(function(a){eb(this,a)}),$(".ib_delete").click(function(a){fb(this,a)}),$('[data-iterate="item"]').hover(function(){$(this).find(".ib_row_commands .ib_commands").css("display","block")},function(){$(this).find(".ib_row_commands .ib_commands").hide()}),new ib_TableDnD(ab,qb).init(),db()},db=function(){function a(a){var b=this;if(a.ctrlKey)return!0;if(a.keyCode>=35&&a.keyCode<=40||a.keyCode>=48&&a.keyCode<=57&&!a.shiftKey||a.keyCode>=96&&a.keyCode<=105||8==a.keyCode||9==a.keyCode||46==a.keyCode||190==a.keyCode||110==a.keyCode||116==a.keyCode)switch($(this).data("ibcl-id")){case"item_tax":case"item_discount":setTimeout(function(){if(isNaN(b.textContent.getNumber())&&(b.textContent=""),!isNaN(b.textContent.getNumber())){var c=window.getSelection().extentOffset;if(b.textContent=-1==b.textContent.indexOf("%")?b.textContent+"%":(-1!=b.textContent.indexOf("-")?"-":"")+b.textContent.getNumber()+"%",c==b.textContent.length?c--:0===c&&-1!=b.textContent.indexOf("-")&&(c=1),9!=a.keyCode)try{window.getSelection().collapse(b.firstChild,c)}catch(d){}}},0);break;case"amount_paid":setTimeout(function(){if(isNaN(b.textContent.getNumber())&&(b.textContent=""),!isNaN(b.textContent.getNumber())){var c=window.getSelection().extentOffset;if(-1!=b.textContent.indexOf("-")&&(b.textContent="-"+b.textContent.getNumber().toFixed(2)),0===c&&-1!=b.textContent.indexOf("-")&&(c=1),9!=a.keyCode)try{window.getSelection().collapse(b.firstChild,c)}catch(d){}}},0);break;case"net_term":$('[data-ibcl-id="net_term"], [data-ibcl-id="due_date"]').removeClass("ib_stop_animate").addClass("ib_highlight_bg"),setTimeout(function(){$('[data-ibcl-id="net_term"], [data-ibcl-id="due_date"]').removeClass("ib_highlight_bg")},10)}else{switch($(this).data("ibcl-id")){case"amount_paid":case"item_discount":if((189==a.keyCode||109==a.keyCode||"-"==a.key)&&-1==$(this).text().indexOf("-")){var c=window.getSelection().extentOffset+1;this.textContent="-"+this.textContent;try{window.getSelection().collapse(b.firstChild,c)}catch(d){}}}a.preventDefault()}-1==$(this).text().indexOf(".")||190!=a.keyCode&&110!=a.keyCode||a.preventDefault(),"net_term"==$(this).data("ibcl-id")&&(190==a.keyCode||110==a.keyCode||$(this).text().length>=3&&a.keyCode>=48&&a.keyCode<=57&&window.getSelection().isCollapsed)&&a.preventDefault(),setTimeout(Z,0),"net_term"==$(this).data("ibcl-id")&&setTimeout(jb,0)}for(var b=$('[data-iterate="item"]'),c=0;c<b.length;c++){{var d=$(b[c]);d.find(""),d.find('[data-ibcl-id="item_price"]'),d.find(""),d.find(""),d.find("")}$('[data-ibcl-id="net_term"], [data-ibcl-id="item_quantity"], [data-ibcl-id="item_price"], [data-ibcl-id="item_discount"], [data-ibcl-id="item_tax"], [data-ibcl-id="amount_paid"], [data-ibcl-id="amount_due"]').keydown(a)}},eb=function(a,c){c.stopPropagation(),c.preventDefault(),$(a).hasClass("ib_add_new_row_link")?$(a).closest(".ib_bottom_row_commands").before($(b).clone()):$(a).closest('[data-iterate="item"]').before($(b).clone()),ab(),cb(),$(".ib_show_hide_columns > ib-span > input:checkbox").each(function(a){$(".ib_show_hide_columns > ib-span > input:checkbox:nth("+a+")").change()}),z()},fb=function(a,b){b.stopPropagation(),b.preventDefault(),$(a).closest('[data-iterate="item"]').remove(),ab()},gb=function(){V=new Date,W=new Date((new Date).setDate((new Date).getDate()+a["{net_term}"].default_text)),X=hb(V,a.date_format),Y=hb(W,a.date_format),a["{issue_date}"].default_text=X,a["{due_date}"].default_text=Y},hb=function(a,b){var c=b.match(/[.\/\-\s].*?/),d=b.split(/\W+/);if(!c||!d||0===d.length)throw new Error("Invalid date format.");b={separator:c,parts:d};var e={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,a=[];for(var f=0;f<b.parts.length;f++)a.push(e[b.parts[f]]);return a.join(b.separator)},ib=function(){var b=$('<ib-div class="ib_date_format"><ib-div><input type="radio" id="ib_date_format_radio1" name="ib_date_format_choice" value="dd/mm/yyyy"><label for="ib_date_format_radio1">dd/mm/yyyy</label></ib-div><ib-div><input type="radio" id="ib_date_format_radio2" name="ib_date_format_choice" value="dd-mm-yyyy"><label for="ib_date_format_radio2">dd-mm-yyyy</label></ib-div><ib-div><input type="radio" id="ib_date_format_radio3" name="ib_date_format_choice" value="mm/dd/yyyy"><label for="ib_date_format_radio3">mm/dd/yyyy</label></ib-div><ib-div><input type="radio" id="ib_date_format_radio4" name="ib_date_format_choice" value="mm-dd-yyyy"><label for="ib_date_format_radio4">mm-dd-yyyy</label></ib-div></ib-div>').hover(function(){$(this).show()},function(){$(this).hide()});$(document.body).after(b),$('[data-ibcl-id="issue_date"]').datepicker({format:a.date_format}).data("datepicker"),$('[data-ibcl-id="due_date"]').datepicker({format:a.date_format,onRender:function(a){return V.setHours(0,0,0,0),a.valueOf()<V.valueOf()?"disabled":""}}).data("datepicker"),$('[data-ibcl-id="issue_date"], [data-ibcl-id="due_date"]').on("changeDate",function(b){if("days"==b.viewMode){$(this).text($(this).data("date"));var c=a["{net_term}"].default_text||0;isNaN(parseInt($('[data-ibcl-id="net_term"]').text()))||(c=parseInt($('[data-ibcl-id="net_term"]').text())),"issue_date"==$(this).data("ibcl-id")?(V=new Date(b.date),a.auto_calculate_dates&&(W=new Date(b.date.setDate(V.getDate()+c)),$('[data-ibcl-id="due_date"]').datepicker("setValue",W).text($('[data-ibcl-id="due_date"]').data("date")),$('[data-ibcl-id="issue_date"]').datepicker("setValue",V).text($('[data-ibcl-id="issue_date"]').data("date")),$('[data-ibcl-id="issue_date"], [data-ibcl-id="due_date"]').removeClass("ib_stop_animate").addClass("ib_highlight_bg"),setTimeout(function(){$('[data-ibcl-id="issue_date"], [data-ibcl-id="due_date"]').removeClass("ib_highlight_bg")},10))):"due_date"==$(this).data("ibcl-id")&&(W=new Date(b.date),a.auto_calculate_dates&&(c=Math.ceil(Math.abs((W.getTime()-V.getTime())/864e5)),$('[data-ibcl-id="net_term"]').text(c),$('[data-ibcl-id="net_term"], [data-ibcl-id="due_date"]').removeClass("ib_stop_animate").addClass("ib_highlight_bg"),setTimeout(function(){$('[data-ibcl-id="net_term"], [data-ibcl-id="due_date"]').removeClass("ib_highlight_bg")},10))),$(this).datepicker("hide")}}).hover(function(){var a=$(this).offset(),c=$(this).width();b.show().offset({top:a.top-5,left:a.left+c})},function(){b.hide()}),b.find("input:radio").val([a.date_format]).change(function(){a.date_format=$(this).val(),$('[data-ibcl-id="issue_date"], [data-ibcl-id="due_date"]').datepicker("setFormat",a.date_format),$('[data-ibcl-id="issue_date"]').datepicker("setValue",V).text($('[data-ibcl-id="issue_date"]').data("date")),$('[data-ibcl-id="due_date"]').datepicker("setValue",W).text($('[data-ibcl-id="due_date"]').data("date"))})},jb=function(){var b=a["{net_term}"].default_text||0;isNaN(parseInt($('[data-ibcl-id="net_term"]').text()))||(b=parseInt($('[data-ibcl-id="net_term"]').text())),a.auto_calculate_dates&&(W=new Date(new Date(V).setDate(V.getDate()+b)),$('[data-ibcl-id="due_date"]').datepicker("setValue",W).text($('[data-ibcl-id="due_date"]').data("date")))},kb=[],lb="$",mb="left",nb="Afghan afghani,؋,AFN,255;Albanian lek,L,ALL,255;Algerian dinar,د.ج,DZD,255;Angolan kwanza,Kz,AOA,255;Argentine peso,$,ARS,255;Armenian dram,դր.,AMD,255;Aruban florin,ƒ,AWG,255;Australian dollar,$,AUD,3;Azerbaijani manat,man.,AZN,255;Bahamian dollar,$,BSD,255;Bahraini dinar,.د.ب,BHD,255;Bangladeshi taka,৳,BDT,255;Barbadian dollar,$,BBD,255;Belarusian ruble,Br,BYR,255;Belize dollar,$,BZD,255;Bermudian dollar,$,BMD,255;Bhutanese ngultrum,Nu.,BTN,255;Bolivian boliviano,Bs.,BOB,255;Bosnia and Herzegovina convertible mark,KM,BAM,255;Botswana pula,P,BWP,255;Brazilian real,R$,BRL,255;British pound,£,GBP,5;Brunei dollar,$,BND,255;Bulgarian lev,лв,BGN,255;Burundian franc,Fr,BIF,255;Cambodian riel,៛,KHR,255;Canadian dollar,$,CAD,2;Cape Verdean escudo,$,CVE,255;Cayman Islands dollar,$,KYD,255;Central African CFA franc,Fr,XAF,255;CFP franc,Fr,XPF,255;Chilean peso,$,CLP,255;Chinese yuan,¥,CNY,255;Colombian peso,$,COP,255;Comorian franc,Fr,KMF,255;Congolese franc,Fr,CDF,255;Costa Rican colón,₡,CRC,255;Croatian kuna,kn,HRK,255;Cuban convertible peso,$,CUC,255;Cuban peso,$,CUP,255;Czech koruna,Kč,CZK,255;Danish krone,kr,DKK,255;Djiboutian franc,Fr,DJF,255;Dominican peso,$,DOP,255;East Caribbean dollar,$,XCD,255;Egyptian pound,£,EGP,255;Eritrean nakfa,Nfk,ERN,255;Estonian kroon[B],kr,EEK,255;Ethiopian birr,Br,ETB,255;Euro,€,EUR,4;Falkland Islands pound,£,FKP,255;Fijian dollar,$,FJD,255;Gambian dalasi,D,GMD,255;Georgian lari,ლ,GEL,255;Ghanaian cedi,₵,GHS,255;Gibraltar pound,£,GIP,255;Guatemalan quetzal,Q,GTQ,255;Guinean franc,Fr,GNF,255;Guyanese dollar,$,GYD,255;Haitian gourde,G,HTG,255;Honduran lempira,L,HNL,255;Hong Kong dollar,$,HKD,255;Hungarian forint,Ft,HUF,255;Icelandic króna,kr,ISK,255;Indian rupee,₨,INR,255;Indonesian rupiah,Rp,IDR,255;Iranian rial,﷼,IRR,255;Iraqi dinar,ع.د,IQD,255;Israeli new shekel,₪,ILS,255;Jamaican dollar,$,JMD,255;Japanese yen,¥,JPY,255;Jordanian dinar,د.ا,JOD,255;Kazakhstani tenge,₸,KZT,255;Kenyan shilling,Sh,KES,255;Kuwaiti dinar,د.ك,KWD,255;Kyrgyzstani som,лв,KGS,255;Lao kip,₭,LAK,255;Latvian lats,Ls,LVL,255;Lebanese pound,ل.ل,LBP,255;Lesotho loti,L,LSL,255;Liberian dollar,$,LRD,255;Libyan dinar,ل.د,LYD,255;Lithuanian litas,Lt,LTL,255;Macanese pataca,P,MOP,255;Macedonian denar,ден,MKD,255;Malagasy ariary,Ar,MGA,255;Malawian kwacha,MK,MWK,255;Malaysian ringgit,RM,MYR,255;Maldivian rufiyaa,ރ.,MVR,255;Mauritanian ouguiya,UM,MRO,255;Mauritian rupee,₨,MUR,255;Mexican peso,$,MXN,255;Moldovan leu,L,MDL,255;Mongolian tögrög,₮,MNT,255;Moroccan dirham,د.م.,MAD,255;Mozambican metical,MTn,MZN,255;Myanma kyat,K,MMK,255;Namibian dollar,$,NAD,255;Nepalese rupee,₨,NPR,255;Netherlands Antillean guilder,ƒ,ANG,255;New Taiwan dollar,$,TWD,255;New Zealand dollar,$,NZD,255;Nicaraguan córdoba,C$,NIO,255;Nigerian naira,₦,NGN,255;North Korean won,₩,KPW,255;Norwegian krone,kr,NOK,255;Omani rial,ر.ع.,OMR,255;Pakistani rupee,₨,PKR,255;Panamanian balboa,B/.,PAB,255;Papua New Guinean kina,K,PGK,255;Paraguayan guaraní,₲,PYG,255;Peruvian nuevo sol,S/.,PEN,255;Philippine peso,₱,PHP,255;Polish złoty,zł,PLN,255;Qatari riyal,ر.ق,QAR,255;Romanian leu,L,RON,255;Russian ruble,р.,RUB,255;Rwandan franc,Fr,RWF,255;Saint Helena pound,£,SHP,255;Salvadoran colón,₡,SVC,255;Samoan tala,T,WST,255;São Tomé and Príncipe dobra,Db,STD,255;Saudi riyal,ر.س,SAR,255;Serbian dinar,din.,RSD,255;Seychellois rupee,₨,SCR,255;Sierra Leonean leone,Le,SLL,255;Singapore dollar,$,SGD,255;Solomon Islands dollar,$,SBD,255;Somali shilling,Sh,SOS,255;South African rand,R,ZAR,255;South Korean won,₩,KRW,255;Sri Lankan rupee,Rs,LKR,255;Sudanese pound,£,SDG,255;Surinamese dollar,$,SRD,255;Swazi lilangeni,L,SZL,255;Swedish krona,kr,SEK,255;Swiss franc,Fr,CHF,255;Syrian pound,£,SYP,255;Tajikistani somoni,ЅМ,TJS,255;Tanzanian shilling,Sh,TZS,255;Thai baht,฿,THB,255;Tongan paʻanga,T$,TOP,255;Trinidad and Tobago dollar,$,TTD,255;Tunisian dinar,د.ت,TND,255;Turkish lira,TL,TRY,255;Turkmenistani manat,m,TMT,255;Ugandan shilling,Sh,UGX,255;Ukrainian hryvnia,₴,UAH,255;United Arab Emirates dirham,د.إ,AED,255;United States dollar,$,USD,1;Uruguayan peso,$,UYU,255;Uzbekistani som,лв,UZS,255;Vanuatu vatu,Vt,VUV,255;Venezuelan bolívar,Bs F,VEF,255;Vietnamese đồng,₫,VND,255;West African CFA franc,Fr,XOF,255;Yemeni rial,﷼,YER,255;Zambian kwacha,ZK,ZMK,255;Zimbabwean dollar,$,ZWL,255",ob=function(){$.each(nb.split(";"),function(a,b){var c=b.split(",");
kb.push({name:c[0],symbol:c[1],code:c[2],priority:c[3]})})},pb=function(){var a=$('<ib-span class="ib_currency_position"><input type="radio" id="ib_currency_left" name="ib_currency" value="left" checked /><label for="ib_currency_left">$100</label><input type="radio" id="ib_currency_right" name="ib_currency" value="right" /><label for="ib_currency_right">100$</label></ib-span>').hover(function(){$(this).show()},function(){$(this).hide()});$(document.body).after(a),$('[data-ibcl-id="currency"]').typeahead({source:function(a,b){ib_currencies_combo=[],$.each(kb,function(a,b){ib_currencies_combo.push("<ib-span data-code='"+b.code+"' data-symbol='"+b.symbol+'\' class="ib_currencies_item"><ib-span>'+b.code+"</ib-span><ib-span>"+b.symbol+"</ib-span><ib-span>"+b.name+"</ib-span></ib-span>")}),b(ib_currencies_combo)},updater:function(a){return lb=$(a).data("symbol"),Z(),$(a).data("code")},matcher:function(a){return-1!=$(a).text().toLowerCase().indexOf(this.query.trim().toLowerCase())?!0:void 0},sorter:function(a){return a.sort()},highlighter:function(a){var b=$(a).children(":first").text(),c=$(a).children(":nth(1)").text(),d=$(a).children(":last").text(),e=$(a).text("").prop("outerHTML"),f=new RegExp("("+this.query+")","gi"),g='<strong style="font-weight:bold;">$1</strong>';return $(e).html($("<ib-span />").html(b.replace(f,g)).prop("outerHTML")+$("<ib-span />").html(c.replace(f,g)).prop("outerHTML")+$("<ib-span />").html(d.replace(f,g)).prop("outerHTML")).prop("outerHTML")}}).blur(function(){var a=$(this),b=$(this).text().toUpperCase();lb="",a.text(b),$.each(kb,function(c,d){return d.code.toUpperCase()==b?(a.text(d.code),lb=d.symbol,void Z()):void 0})}).hover(function(){var b=$(this).offset(),c=$(this).width();a.show().offset({top:b.top-5,left:b.left+c+1})},function(){a.hide()}),$('#ib_currency_left[value="'+mb+'"], #ib_currency_right[value="'+mb+'"]').attr("checked","checked"),$("#ib_currency_left, #ib_currency_right").change(function(){mb=$(this).val(),Z()})},qb=function(){var b={hash:"",type:"invoice",company_logo:"",company_name:"",company_address:"",company_city_zip_state:"",company_phone_fax:"",company_email_web:"",payment_info1:"",payment_info2:"",payment_info3:"",payment_info4:"",payment_info5:"",issue_date_label:"",issue_date:"",net_term_label:"",net_term:"0",due_date_label:"",due_date:"",currency_label:"",po_number_label:"",po_number:"",bill_to_label:"",client_name:"",client_address:"",client_city_zip_state:"",client_phone_fax:"",client_email:"",client_other:"",invoice_title:"",invoice_number:"",item_row_number_label:"",item_description_label:"",item_quantity_label:"",item_price_label:"",item_discount_label:"",item_tax_label:"",item_line_total_label:"",amount_subtotal_label:"",amount_subtotal:"0",amount_total_label:"",amount_total:"0",amount_paid_label:"",amount_paid:"0",amount_due_label:"",amount_due:"0",terms_label:"",terms:"",items_columns:[],items:[],taxes:[],date_format:"",currency_code:"",currency_symbol:"",currency_position:""};return b.hash=$('meta[name="template-hash"]').attr("content")||b.hash,b.type=$('meta[name="document-type"]').attr("content")||b.type,$('[data-logo="company_logo"]').is(":visible")&&(b.company_logo=$('[data-logo="company_logo"]').attr("src")||b.company_logo),$("[data-ibcl-id]").each(function(a,c){var d=$(c);b[d.data("ibcl-id")]=$("<div />").html(d.html().replace(/<br\s*(\/|\s*)>/gi,"\n")).text()||b[d.data("ibcl-id")]}),b.net_term||(b.net_term=Math.floor(Math.abs((W.getTime()-V.getTime())/864e5))),$(".ib_show_hide_columns > ib-span > input:checkbox").each(function(a,c){$(c).is(":checked")&&b.items_columns.push($(c).val())}),delete b.item_row_number,delete b.item_description,delete b.item_quantity,delete b.item_price,delete b.item_discount,delete b.item_tax,delete b.item_line_total,$('[data-iterate="item"]').each(function(a,c){var d={};$(c).children().each(function(a,b){var c=$(b);d[c.data("ibcl-id")]=$("<div />").html(c.html().replace(/<br\s*(\/|\s*)>/gi,"\n")).text()}),d.item_quantity=d.item_quantity.getNumber(),d.item_price=d.item_price.getNumber(),d.item_tax_percentage=d.item_tax.getNumber(),d.item_tax=U(d.item_tax.getNumber()),d.item_discount=d.item_discount.getNumber(),d.item_line_total=d.item_line_total.getNumber(),b.items.push(d)}),delete b.tax_name,delete b.tax_value,$('[data-iterate="tax"]:visible').each(function(a,c){var d={};$(c).children().each(function(a,b){var c=$(b);d[c.data("ibcl-id")]=$("<div />").html(c.html().replace(/<br\s*(\/|\s*)>/gi,"\n")).text(),c.attr("data-ib-value")&&(d.tax_percentage=c.attr("data-ib-value").getNumber())}),d.tax_value=d.tax_value.getNumber(),b.taxes.push(d)}),b.amount_subtotal=b.amount_subtotal.getNumber(),b.amount_total=b.amount_total.getNumber(),b.amount_paid=b.amount_paid.getNumber(),b.amount_due=b.amount_due.getNumber(),b.date_format=a.date_format,b.currency_code=b.currency,b.currency_symbol=lb,delete b.currency,b.currency_position=$('.ib_currency_position input[type="radio"]:checked').val(),b},rb=!1,sb=function(){if(!rb){rb=!0,$(this).addClass("ib_disabled_button").attr("disabled","disabled").find("i.fa").removeClass("fa-save").addClass("fa-spinner fa-spin");var a=$("<div />").text(JSON.stringify(qb())).html().replace(/"/gi,"&quot;");f+=e+"&utm_term="+encodeURIComponent(document.title),$('<form id="ib_save_tamplate_form" style="display:none !important;" action="'+f+'" method="POST" />').append($('<input type="hidden" name="invoice_data" value="'+a+'" />')).appendTo($(document.body)).submit()}},tb=function(a,b){for(var c=b||window.location.search.substring(1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]==a)return f[1]}return!1};o(i);var ub=B();tb("data",ub)&&o(tb("data",ub)),p(function(){r()})}();var ib_TableDnD=function(a){var b=null;this.dragObject=null,this.mouseOffset=null,this.oldY=0,this.init=function(){for(var a=$('[data-iterate="item"]'),c=0;c<a.length;c++)this.makeDraggable(a[c]);document.onmousemove=function(a){if(b&&b.dragObject){a=a||window.event;var c=b.mouseCoords(a),d=c.y;if(d!=b.oldY){var e=d>b.oldY;b.oldY=d,$(b.dragObject).addClass("ib_dragrow"),document.body.style.cursor="move";var f=b.findDropTargetRow(d);f&&(e&&b.dragObject!=f?b.dragObject.parentNode.insertBefore(b.dragObject,f.nextSibling):e||b.dragObject==f||b.dragObject.parentNode.insertBefore(b.dragObject,f))}return!1}},document.onmouseup=function(){if(b&&b.dragObject){var a=b.dragObject;$(b.dragObject).removeClass("ib_dragrow"),b.dragObject=null,b.onDrop(a),b=null}}},this.onDrop=function(){document.body.style.cursor="default",a()};var c=function(){var a=0,b=0;return"number"==typeof window.pageYOffset?(b=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(b=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft),[a,b]};this.mouseCoords=function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+c()[0],y:a.clientY+c()[1]}},this.getMouseOffset=function(a,b){e=b||window.event;var c=$(a).offset(),d=this.mouseCoords(e);return{x:d.x-c.left,y:d.y-c.top}};var d=function(a){return window.event?(a=window.event,a.srcElement):a.target};this.makeDraggable=function(a){if(a){var c=this;$(a).find(".ib_move").on("mousedown",function(e){var f=d(e);return"INPUT"==f.tagName||"SELECT"==f.tagName||"TEXTAREA"==f.tagName?!0:(b=c,c.dragObject=a,c.mouseOffset=c.getMouseOffset(a,e),!1)}),$(a).find(".ib_move").css("cursor","move")}},this.findDropTargetRow=function(a){for(var b=$('[data-iterate="item"]'),c=0;c<b.length;c++){var d=b[c],e=$(d).offset().top,f=parseInt(d.offsetHeight);if(0===d.offsetHeight&&(e=$(d.firstChild).offset().top,f=parseInt(d.firstChild.offsetHeight)),a>e-f&&e+f>a)return d}return null}},ib_loadBootstrapDatepicker=function(){var a=function(a,c){if(this.element=$(a),this.format=b.parseFormat(c.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=$(b.template).appendTo("body").on({click:$.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this)}):this.component?this.component.on("click",$.proxy(this.show,this)):this.element.on("click",$.proxy(this.show,this)),this.minViewMode=c.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=c.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=c.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=c.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};a.prototype={constructor:a,show:function(a){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),$(window).on("resize",$.proxy(this.place,this)),a&&(a.stopPropagation(),a.preventDefault()),!this.isInput;var b=this;$(document).on("mousedown",function(a){0===$(a.target).closest(".datepicker").length&&b.hide()}),this.element.trigger({type:"show",date:this.date}),this.fill()},hide:function(){this.picker.hide(),$(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||$(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var a=b.formatDate(this.date,this.format);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setValue:function(a){this.date="string"==typeof a?b.parseDate(a,this.format):new Date(a),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},setFormat:function(a){this.format=b.parseFormat(a);var c=b.formatDate(this.date,this.format);this.isInput?this.element.prop("value",c):(this.component&&this.element.find("input").prop("value",c),this.element.data("date",c)),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left+this.element.width()/2})},update:function(a){this.date=b.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var a=this.weekStart,c="<tr>";a<this.weekStart+7;)c+='<th class="dow">'+b.dates.daysMin[a++%7]+"</th>";c+="</tr>",this.picker.find(".datepicker-days thead").append(c)},fillMonths:function(){for(var a="",c=0;12>c;)a+='<ib-span class="month">'+b.dates.monthsShort[c++]+"</ib-span>";this.picker.find(".datepicker-months td").append(a)},fill:function(){var a=new Date(this.viewDate),c=a.getFullYear(),d=a.getMonth(),e=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(b.dates.months[d]+" "+c);var f=new Date(c,d-1,28,0,0,0,0),g=b.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(g),f.setDate(g-(f.getDay()-this.weekStart+7)%7);var h=new Date(f);h.setDate(h.getDate()+42),h=h.valueOf();for(var i,j,k,l=[];f.valueOf()<h;)f.getDay()===this.weekStart&&l.push("<tr>"),i=this.onRender(f),j=f.getFullYear(),k=f.getMonth(),d>k&&j===c||c>j?i+=" old":(k>d&&j===c||j>c)&&(i+=" new"),f.valueOf()===e&&(i+=" active"),l.push('<td class="day '+i+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&l.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(l.join(""));var m=this.date.getFullYear(),n=this.picker.find(".datepicker-months").find("th:eq(1)").text(c).end().find("ib-span").removeClass("active");m===c&&n.eq(this.date.getMonth()).addClass("active"),l="",c=10*parseInt(c/10,10);var o=this.picker.find(".datepicker-years").find("th:eq(1)").text(c+"-"+(c+9)).end().find("td");c-=1;for(var p=-1;11>p;p++)l+='<ib-span class="year'+(-1===p||10===p?" old":"")+(m===c?" active":"")+'">'+c+"</ib-span>",c+=1;o.html(l)},click:function(a){a.stopPropagation(),a.preventDefault();var c=$(a.target).closest("ib-span, td, th");if(1===c.length){var d,e,f;switch(c[0].nodeName.toLowerCase()){case"th":switch(c[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+b.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+b.modes[this.viewMode].navFnc].call(this.viewDate)+b.modes[this.viewMode].navStep*("prev"===c[0].className?-1:1)),this.fill(),this.set()}break;case"ib-span":c.is(".month")?(e=c.parent().find("ib-span").index(c),this.viewDate.setMonth(e)):(f=parseInt(c.text(),10)||0,this.viewDate.setFullYear(f)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:b.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":c.is(".day")&&!c.is(".disabled")&&(d=parseInt(c.text(),10)||1,e=this.viewDate.getMonth(),c.is(".old")?e-=1:c.is(".new")&&(e+=1),f=this.viewDate.getFullYear(),this.date=new Date(f,e,d,0,0,0,0),this.viewDate=new Date(f,e,Math.min(28,d),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:b.modes[this.viewMode].clsName}))}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+b.modes[this.viewMode].clsName).show()}},$.fn.datepicker=function(b,c){return this.each(function(){var d=$(this),e=d.data("datepicker"),f="object"==typeof b&&b;e||d.data("datepicker",e=new a(this,$.extend({},$.fn.datepicker.defaults,f))),"string"==typeof b&&e[b](c)})},$.fn.datepicker.defaults={onRender:function(){return""}},$.fn.datepicker.Constructor=a;var b={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,c){return[31,b.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][c]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a,b){var c,d=a.split(b.separator);if(a=new Date,a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),d.length===b.parts.length){for(var e=a.getFullYear(),f=a.getDate(),g=a.getMonth(),h=0,i=b.parts.length;i>h;h++)switch(c=parseInt(d[h],10)||1,b.parts[h]){case"dd":case"d":f=c,a.setDate(c);break;case"mm":case"m":g=c-1,a.setMonth(c-1);break;case"yy":e=2e3+c,a.setFullYear(2e3+c);break;case"yyyy":e=c,a.setFullYear(c)}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m,a=[];for(var d=0,e=b.parts.length;e>d;d++)a.push(c[b.parts[d]]);return a.join(b.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};b.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+b.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+b.headTemplate+b.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+b.headTemplate+b.contTemplate+"</table></div></div>"},ib_loadBootstrapTypeahead=function(){"use strict";var a=function(a,b){this.$element=$(a),this.options=$.extend({},$.fn.typeahead.defaults,b),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.delay="number"==typeof this.options.delay?this.options.delay:250,this.$menu=$(this.options.menu),this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1};a.prototype={constructor:a,select:function(){var a=this.$menu.find(".active").data("value");return(this.autoSelect||a)&&this.$element.text(this.updater(a)).change(),this.hide()},updater:function(a){return a},setSource:function(a){this.source=a},show:function(){var a,b=$.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return a="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,this.$menu.appendTo(document.body).css({top:b.top+b.height+a,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(a){var b;if(this.query="undefined"!=typeof a&&null!==a?a:this.$element.text()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var c=$.proxy(function(){b=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,b&&this.process(b)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(c,this.delay)},process:function(a){var b=this;return a=$.grep(a,function(a){return b.matcher(a)}),a=this.sorter(a),a.length?"all"==this.options.items?this.render(a).show():this.render(a.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(a){var b=this;return a=$(a).map(function(a,c){return a=$(b.options.item).data("value",c),a.find("a").html(b.highlighter(c)),a[0]}),this.autoSelect&&a.first().addClass("active"),this.$menu.html(a),this},next:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.next();b.length||(b=$(this.$menu.find("li")[0])),b.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(a){this.suppressKeyPressRepeat=~$.inArray(a.keyCode,[40,38,9,13,27]),this.shown||40!=a.keyCode?this.move(a):this.lookup("")},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused||(this.focused=!0,(0===this.options.minLength&&!this.$element.text()||this.options.showHintOnFocus)&&this.lookup())},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(a){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(a.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var b=$.fn.typeahead;$.fn.typeahead=function(b){var c=arguments;return this.each(function(){var d=$(this),e=d.data("typeahead"),f="object"==typeof b&&b;e||d.data("typeahead",e=new a(this,f)),"string"==typeof b&&(c.length>1?e[b].apply(e,Array.prototype.slice.call(c,1)):e[b]())})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0},$.fn.typeahead.Constructor=a,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=b,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var a=$(this);a.data("typeahead")||a.typeahead(a.data())})};